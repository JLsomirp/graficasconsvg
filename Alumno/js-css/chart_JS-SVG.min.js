function valorMax(a){"use strict";var o,t=[];return $.each(a,function(o){t[o]=Math.max.apply(Math,a[o].valores)}),o=Math.max.apply(Math,t)}function grafica_linear(a,o,t){"use strict";o.Cuadricula.visibleFondo===!0&&a.rect(o.Cuadricula.padding,o.Cuadricula.padding,o.Cuadricula.ancho,o.Cuadricula.altura).attr({fill:o.Cuadricula.colorFondo,"stroke-width":"0"});var i,r,e,n=0,l={grupo:[],valores:EjeX,cuantos:EjeX.length+1,separacion:(o.Cuadricula.ancho-20+o.Cuadricula.ancho/(EjeX.length+1))/(EjeX.length+1),tamano_data:150/parseInt(o.Cuadricula.textoTamano,10)},c={grupo:[],valores:{minimo:0,maximo:valorMax(t)+20},cuantos:o.Cuadricula.altura/o.Cuadricula.lineaCada,separacion:o.Cuadricula.altura/(o.Cuadricula.altura/o.Cuadricula.lineaCada),tamano_data:35+o.Cuadricula.padding},d=function(a){return a=a.toString(),1===a.length?a="0.00"+a:2===a.length?a="0.0"+a:3===a.length?a="0."+a:4===a.length?a=a.substr(0,1)+"."+a.substr(1,3):5===a.length&&(a=a.substr(0,2)+"."+a.substr(2,4)),a},s=function(a){return a=a*c.valores.maximo/(Math.round((o.Cuadricula.altura-l.tamano_data)/o.Cuadricula.lineaCada)-1),Math.round(a)},u=function(a){return a<l.cuantos-1?(a=c.tamano_data+l.separacion*(a+.5),Math.round(a)):-100},p=function(a,o,t){return a=100*(t-a)/t*(o-c.tamano_data)/100+c.tamano_data,Math.round(a)},h=EjeX.length-1,f=EjeX.length-3,v=function(a,t){"1"===t.node.attributes.opacity.value&&t.data("conteo")<=h&&t.data("conteo")>=f?(o.Descripcion.identificador.find(".info").html(o.Descripcion.html.replace(/Listado.colorFondo/gi,t.attrs.fill).replace(/Listado.valor/gi,d(t.data("valor"))).replace(/Listado.nombre/gi,t.data("nombre")).replace(/Listado.porcentaje/gi,t.data("porcentaje")).replace("<span>(NaN%)</span>"," ").replace("(Infinity%)","")).stop(!0).fadeIn(0),o.Descripcion.identificador.find(".info").animate({top:t.attrs.cy+parseInt(t.attrs.r.replace("px",""),10),left:t.attrs.cx+parseInt(t.attrs.r.replace("px",""),10)-o.Descripcion.identificador.find(".info").width()-30},400)):"1"===t.node.attributes.opacity.value&&t.data("conteo")<f&&o.Descripcion.identificador.find(".info").html(o.Descripcion.html.replace(/Listado.colorFondo/gi,t.attrs.fill).replace(/Listado.valor/gi,d(t.data("valor"))).replace(/Listado.nombre/gi,t.data("nombre")).replace(/Listado.porcentaje/gi,t.data("porcentaje")).replace("<span>(NaN%)</span>"," ").replace("(Infinity%)","")).stop(!0).fadeIn(0).animate({top:t.attrs.cy+parseInt(t.attrs.r.replace("px",""),10),left:t.attrs.cx+parseInt(t.attrs.r.replace("px",""),10)},400),console.log(t.data("conteo"),h)},C=function(){o.Descripcion.identificador.find(".info").fadeOut(0)};if(o.Cuadricula.visibleCuadricula&&o.Cuadricula.visibleEscala===!0)for(i=o.Cuadricula.altura-l.tamano_data;i>l.tamano_data;i-=o.Cuadricula.lineaCada)a.path("M"+c.tamano_data+" "+i+" L"+(o.Cuadricula.ancho+o.Cuadricula.padding)+" "+i).attr({"stroke-width":o.Cuadricula.anchoLinea,stroke:o.Cuadricula.colorLinea,"stroke-dasharray":o.Cuadricula.tipoLinea}),r=s(n),c.grupo[n]=r,o.Descripcion.identificador.parent("li").find("div.escala").append('<div style="top: '+(i-5)+'px">'+r+"</div>"),n+=1;else if(o.Cuadricula.visibleCuadricula===!0&&o.Cuadricula.visibleEscala===!1)for(i=o.Cuadricula.altura-l.tamano_data;i>l.tamano_data;i-=o.Cuadricula.lineaCada)a.path("M"+o.Cuadricula.padding+" "+i+" L"+(o.Cuadricula.ancho+o.Cuadricula.padding)+" "+i).attr({"stroke-width":o.Cuadricula.anchoLinea,stroke:o.Cuadricula.colorLinea,"stroke-dasharray":o.Cuadricula.tipoLinea}),r=s(n),c.grupo[n]=r,n+=1;if(o.Cuadricula.visibleCuadricula&&o.Cuadricula.visibleSegmentos===!0)for(i=0;i<l.cuantos-1;i+=1)a.path("M"+(c.tamano_data+l.separacion*i)+" "+o.Cuadricula.padding+" L"+(c.tamano_data+l.separacion*i)+" "+(o.Cuadricula.altura-o.Cuadricula.padding/2)).attr({"stroke-width":o.Cuadricula.anchoLinea,stroke:o.Cuadricula.colorLinea,"stroke-dasharray":o.Cuadricula.tipoLinea}),r=u(i),l.grupo[i]=r,a.text(r,o.Cuadricula.altura,EjeX[i]).attr({"font-size":o.Cuadricula.textoTamano,fill:o.Cuadricula.textoColor,"font-family":o.Cuadricula.textoFuente});else if(o.Cuadricula.visibleCuadricula===!0&&o.Cuadricula.visibleSegmentos===!1)for(i=0;i<l.cuantos;i+=1)a.path("M"+(c.tamano_data+l.separacion*i)+" "+o.Cuadricula.padding+" L"+(c.tamano_data+l.separacion*i)+" "+(o.Cuadricula.altura-o.Cuadricula.padding/2)).attr({"stroke-width":o.Cuadricula.anchoLinea,stroke:o.Cuadricula.colorLinea,"stroke-dasharray":o.Cuadricula.tipoLinea}),r=u(i),l.grupo[i]=r;for($.each(t.reverse(),function(t,r){for(e="M",i=0;i<r.valores.length;i++)e+=l.grupo[i]+" "+p(r.valores[i],o.Cuadricula.altura-l.tamano_data,c.grupo[c.grupo.length-1])+"L",r.x[i]=l.grupo[i],r.y[i]=p(r.valores[i],o.Cuadricula.altura-l.tamano_data,c.grupo[c.grupo.length-1]);for(a.path(e).attr(r.datos.visible!==!0?{"class":r.datos.nombre,stroke:r.datos.color,"stroke-width":o.Linea.grosor,"stroke-dasharray":o.Linea.tipo,opacity:0}:{"class":r.datos.nombre,stroke:r.datos.color,"stroke-width":o.Linea.grosor,"stroke-dasharray":o.Linea.tipo}),i=0;i<r.x.length;i++){var n,d=i-1;n="("+(100*(r.valores[i]/r.valores[d]-1)).toFixed(2)+"%)",r.datos.visible===!0?a.circle(r.x[i],r.y[i],o.Linea.puntoTamano).attr({fill:r.datos.color,stroke:o.Linea.puntoColorBorde,"stroke-width":o.Linea.puntoBorde,opacity:"1"}).hover(function(a){v(a,this)},function(a){C(a)}).data("valor",r.valores[i]).data("visible",r.datos.visible).data("nombre",r.datos.nombre).data("porcentaje",n).data("conteo",i):a.circle(r.x[i],r.y[i],o.Linea.puntoTamano).attr({fill:r.datos.color,stroke:o.Linea.puntoColorBorde,"stroke-width":o.Linea.puntoBorde,opacity:0}).hover(function(a){v(a,this)},function(a){C(a)}).data("valor",r.valores[i]).data("visible",r.datos.visible).data("nombre",r.datos.nombre).data("porcentaje",n).data("conteo",i)}}),o.Listado.visible===!0&&(o.Listado.identificador.html(o.Listado.htmlTitulo.replace("Listado.titulo",o.Listado.titulo)),$.each(t.reverse(),function(a,t){o.Listado.identificador.append(t.datos.visible===!0?o.Listado.html.replace(/data.colorFondo/gi,t.datos.color.toLowerCase()).replace(/Listado.colorFondo/gi,t.datos.color).replace("Listado.valor",d(t.valores[t.valores.length-1])).replace("Listado.nombre",t.datos.nombre):o.Listado.html.replace(/data.colorFondo/gi,t.datos.color.toLowerCase()).replace(/Listado.colorFondo/gi,o.Descripcion.colorBase).replace("Listado.valor",d(t.valores[t.valores.length-1])).replace("Listado.nombre",t.datos.nombre))})),i=0,i=0;i<o.Acotaciones.elementosVisibles;i++)o.Listado.identificador.find("p").eq(i).click();o.Acotaciones.visible===!0&&o.Acotaciones.identificador.html("<h5>"+Acotaciones[0]+" <br /><span>"+Acotaciones[1]+"</span></h5><h6>"+Acotaciones[2]+"</h6>")}function Grafica(a,o,t){"use strict";if($("#"+o).html('<div class="info"></div>'),$("#"+o).parent("li").append('<div class="acotaciones"></div><div class="listado"></div><div class="escala"></div>'),"Linear"===a){var i=$("#"+o),r=parseInt(i.css("width"),10)+600,e=parseInt(i.css("height"),10),n=20,l=new Raphael(o,r,e),c={Cuadricula:{visibleFondo:!0,visibleCuadricula:!0,visibleEscala:!0,visibleSegmentos:!0,anchoLinea:.25,tipoLinea:".",colorLinea:"#333",colorFondo:i.css("background-color"),padding:n,ancho:r-2*n,altura:e-2*n,lineaCada:60,textoFuente:"Helvetica, Arial, Sans-serif",textoTamano:"10px",textoColor:"#a0a0a0"},Linea:{grosor:"3px",tipo:"",puntoTamano:"5px",puntoBorde:"1px",puntoColorBorde:i.css("background-color")},Descripcion:{identificador:i,html:'<h3 style="background-color: Listado.colorFondo">Listado.valor<span>Listado.porcentaje</span></h3><h4>Listado.nombre</h4>',colorBase:"#D4D4D4"},Acotaciones:{identificador:i.parent("li").find(".acotaciones"),visible:!0,elementosVisibles:10},Listado:{visible:!0,identificador:i.parent("li").find(".listado"),ancho:0,titulo:"Junio 2016",htmlTitulo:"<h1>Listado.titulo</h1>",html:'<p onclick="visible_o_no(this, \'data.colorFondo\')"><span style="background-color: Listado.colorFondo">Listado.valor</span> Listado.nombre</p>',leyenda:Leyenda}};c.Listado.visible===!0&&(c.Cuadricula.ancho=r-c.Listado.ancho-n/2-n),grafica_linear(l,c,t)}}var $,Raphael,console,EjeX,Data_smartphones,h,visible_o_no=function(a,o){"use strict";var t=$(a).parent().parent().find("path"),i=$(a).parent().parent().find("circle");for(h=0;h<t.length;h++)t.eq(h).attr("stroke")===o&&"0"===t.eq(h).attr("opacity")?(t.eq(h).css("opacity",1).attr("opacity","1"),$("span",a).css("background-color",o)):t.eq(h).attr("stroke")===o&&"1"===t.eq(h).attr("opacity")&&(t.eq(h).css("opacity",0).attr("opacity",0),$("span",a).css("background-color","#D4D4D4"));for(h=0;h<i.length;h++)i.eq(h).attr("fill")===o&&"0"===i.eq(h).attr("opacity")?i.eq(h).css({opacity:1,position:"relative","z-index":10,display:"block"}).attr("opacity","1"):i.eq(h).attr("fill")===o&&"1"===i.eq(h).attr("opacity")&&i.eq(h).css({opacity:0,"z-index":0,display:"none"}).attr("opacity","0")};